<!DOCTYPE html>
<html>
    <head>
        <title>Welcome to RPS.JS</title>
    </head>
    <body>
        <script>
    
let humanPlay = () => window.prompt("Pick your poison, mate. Rock, paper or scissors").toLowerCase() 

// make the computer choose
function computerPlay() {
    let i = Math.random();
    if (i < 0.33) { 
        return "rock"
    } else if (i > 0.33 && i < 0.66) {
        return "paper"
    } else {
        return "scissors"
    }
}
// this isn't particularly elegant, what's a better way to implement this?
// 1 = player win, 0 = draw, -1 = computer win

function playRound(playerSelection, computerSelection) {
    switch (playerSelection) {
        case "rock":
            switch(computerSelection) {
                case "rock":
                    return 0
                case "paper":
                    return -1
                case "scissors":
                    return 1
                default:
                    return -3
            }
        case "paper":
                switch(computerSelection) {
                case "rock":
                    return 1
                case "paper":
                    return 0
                case "scissors":
                    return -1
                default:
                    return -3
            }
        case "scissors": 
            switch(computerSelection) {
                case "rock":
                    return -1
                case "paper":
                    return 1
                case "scissors":
                    return 0
                default:
                    return -3
            }
        default:
            console.log("You made an invalid pick. Try again.")
            return -2
    }
}

function game() {
    let humanScore = 0
    let computerScore = 0
    for (i = 1; i<=5; i++)
    {
        console.log(`Round ${i}. Current score Human ${humanScore}:${computerScore} Computer.`)
        let playerSelection = humanPlay()
        let computerSelection = computerPlay()
        switch (playRound(playerSelection, computerSelection)) {
            case -1: 
                console.log(`You lost! You picked ${playerSelection} and the AI picked ${computerSelection}.`)
                computerScore++
                break
            case 0: 
                console.log(`It's a draw! You both picked ${playerSelection}.`)
                break
            case 1: 
                console.log(`You won! You picked ${playerSelection} and the AI picked ${computerSelection}.`)
                humanScore++
                break
            case -2:
                i--
                console.log("The round will be replayed.")
                break 
            default:
                console.log("Something went wrong. This shouldn't be happening.")
                break
        }
    }

    if (humanScore > computerScore) {
        console.log(`You won! The final score is ${humanScore}:${computerScore}`)
    } else if (computerScore > humanScore) {
        console.log(`You lost! The final score is ${humanScore}:${computerScore}`)
    } else {
        console.log(`It's a draw! You tied at ${humanScore}`)
    }
}

game()

        </script>
    </body>
</html>